<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antsy Records</title>

    <!-- ‚úÖ Essential Meta Only -->
    <meta name="description" content="Explore Antsy Records' diverse music catalog with a fully interactive experience.">
    <meta name="keywords" content="Antsy Records, music, Bandcamp, albums, artists">
    
    <!-- ‚úÖ Favicon -->
    <link rel="icon" href="icons/favicon.ico" type="image/x-icon">

    <!-- ‚úÖ Stylesheets -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/desktop.css">
    <link rel="stylesheet" href="css/windows.css">
    <link rel="stylesheet" href="css/catalog.css">
    <link rel="stylesheet" href="css/markdown.css">
    <link rel="stylesheet" href="css/tooltips.css">
    <link rel="stylesheet" href="css/ticker.css">
    <link rel="stylesheet" href="css/media.css">
    <link rel="stylesheet" href="css/player.css">
    <link rel="stylesheet" href="css/settings.css">

    <!-- ‚úÖ Markdown Support -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- ‚úÖ Core Managers -->
    <script defer src="js/dragManager.js"></script>
    <script defer src="js/windowManager.js"></script>
    <script defer src="js/iconManager.js"></script>
    <script defer src="js/iconHandler.js"></script>
    <script defer src="js/resizeHandler.js"></script>

    <!-- ‚úÖ Window and Content Loaders -->
    <script type="module">
        import "./js/catalogWindow.js";
        import "./js/playerWindow.js";
        import "./js/bandcampEmbed.js";
        import "./js/settings.js";
    </script>    

    <!-- ‚úÖ Ensuring Proper Initialization -->
    <script defer>
        document.addEventListener("DOMContentLoaded", async () => {
            console.log("‚úÖ Ensuring Proper Initialization...");

            if (typeof initializeDragManager === "function") {
                initializeDragManager();
            } else {
                console.error("‚ùå initializeDragManager() is not defined!");
            }

            if (typeof initializeIcons === "function") {
                initializeIcons();
            } else {
                console.error("‚ùå initializeIcons() is not defined!");
            }

            if (typeof updateIconSizes === "function") {
                updateIconSizes();
            } else {
                console.error("‚ùå updateIconSizes() is not defined!");
            }

            try {
                const { initializeWindows } = await import("./js/windowManager.js");
                initializeWindows();
            } catch (err) {
                console.error("‚ùå Failed to load windowManager module:", err);
            }
        });
    </script>
</head>
<body>
    <!-- ‚úÖ Background Overlay -->
    <div id="background-overlay"></div>

    <!-- ‚úÖ Desktop Container -->
    <div id="desktop-container" role="main">
        <div id="desktop">
            <!-- üéµ Music Catalog -->
            <div class="icon" data-file="music-catalog">
                <img src="icons/folder-music.png" alt="Music Catalog">
                <span>Music Catalog</span>
            </div>

            <!-- ‚ÑπÔ∏è About -->
            <div class="icon" data-file="about">
                <img src="icons/about.png" alt="About">
                <span>About</span>
            </div>

            <!-- ‚öôÔ∏è Settings -->
            <div class="icon" data-file="settings">
                <img src="icons/settings.png" alt="Settings">
                <span>Settings</span>
            </div>

            <!-- üåê Seamless Navigation -->
            <div class="icon shortcut" data-url="http://sonisk.seigr.net" onclick="window.open(this.dataset.url, '_blank')">
                <img src="icons/audio.png" alt="Sonisk">
                <span>Sonisk Seigr</span>
            </div>

            <div class="icon shortcut" data-url="http://seigr.net" onclick="window.open(this.dataset.url, '_blank')">
                <img src="icons/seigr.png" alt="Seigr">
                <span>Seigr</span>
            </div>
        </div>
    </div>

    <!-- ‚úÖ Window Container -->
    <div id="window-container"></div>

    <!-- ‚úÖ Scrolling Ticker -->
    <div id="ticker-container">
        <div id="ticker">üöß Site Under Construction üöß</div>
    </div>

</body>
</html>
